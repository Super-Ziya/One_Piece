### Linux

####1、xshell

> 上传文件到服务器：`rz -y`
>
> 下载文件到本地：`sz + 文件`
>
> 获得权限：`sudo su` 回车后输入密码

#### 2、常用命令

>`ls` 列出文件夹里文件名称
>
>`ll` 查看文件夹信息，文件总数等详细信息
>
>`cd /` 回到主文件夹；`cd ..` 返回上一级目录
>
>`rm +文件` 删除文件（`-f` 强制删除）
>
>`rm -r +文件夹` 删除文件夹
>
>`mkdir +文件夹` 创建文件夹
>
>`mv 文件名 目标文件夹目录(例如/home/USER_zy)` 移动文件到目标文件夹
>
>`ps -ef|grep py` 查看当前进程
>
>`df -hl` 查看内存空间

####3、VI编辑

> 按ESC进入Command模式，输入
>
> > `：wq` 回车就是保存退出
> >
> > `w` 保存
> >
> > `wq!` 保存强制退出
> >
> > `q!` 强制退出

#### 4、Linux IPC 机制：

- 管道（pipe）：内核管理的缓冲区，半双工，只能用于父子进程/兄弟进程（fork、exec 创建）

  - 通过底层 read 和 write 调用来访问数据，写入、读取的顺序是先进先出
  - 写入的数据量不大于 PIPE_BUF 时，linux 保证写入原子性；大于不保证
  - 最后一个引用管道的进程终止后就会被删除

- 命名管道：克服管道弊端，允许没有亲缘关系的进程间通信，管道可以是事先创建好的

- 信号：用于一个或几个进程间传递异步信号，可以由各种异步事件产生，如键盘中断等

- 消息队列：**内核地址空间内部链表**（结构体结构，消息类型加消息数据），通过内核在各个进程传递内容，每个消息队列可用 IPC 标识符唯一识别，不同消息队列相互独立，每个队列维护一个结构体，保存消息队列当前状态信息（用户 id、组 id 等）

  - 克服信号承载信息少，管道只能承载无格式字符流

  - 进程终止时消息依然保留

  - 与命名管道相比：

    > 相同：可以不相关进程、发送接收传递数据、对每个数据都有长度限制
    >
    > 优势：
    >
    > - 可独立于发送、接收进程，消除同步命名管道的打开关闭的困难
    > - 避免命名管道的同步、阻塞问题，不需进程自己提供同步方法
    > - 可通过消息类型有选择性接收数据，命名管道只能默认接收

- 信号量：一种计数器（锁机制、PV 操作）

  - P（申请资源）：sv 大于 0，减 1；等于 0，挂起该进程
  - V（释放资源）：因等待 sv 而挂起的进程就运行；没有挂起进程加 1

- 共享内存：在多个进程之间共享内存区域，由 IPC 为进程创建一个特殊地址范围（在该进程的地址空间）。其他进程可将同一段共享内存连接到自己的地址空间中，所有进程都可访问共享内存中的地址。如果一个进程向共享内存写入了数据，改动将立刻被其他进程看到。多进程间的共享内存是同一块物理空间，仅映射到各进程的地址不同。**共享内存没有同步机制，需要程序员自己控制**

  - 和管道、消息队列等相比不用通过中间机制转换
  - 与信号量、命名管道相同：都有命名

- 内存映射：文件到一块内存的映射（类似虚拟内存），可以保留一个地址的区域，同时将物理存储器提交给此区域，内存文件映射的物理存储器来自一个已经存在于磁盘上的文件，而且在对该文件进行操作之前必须首先对文件进行映射。**使用内存映射文件处理存储于磁盘上的文件时不再对文件执行 I/O 操作**。 每一个使用该机制的进程通过把同一个共享的文件映射到自己的进程地址空间来实现多进程通信（类似共享内存，只要一个进程对这块映射文件的内存进行操作，其他进程也能马上看到）

  - 使用内存映射文件不仅可实现多进程通信，还可用于处理大文件提高效率。普通做法是把磁盘上文件先拷贝到内核空间一个缓冲区再拷贝到用户空间（内存），用户修改后再将这些数据拷贝到缓冲区再拷贝到磁盘文件，一共四次拷贝。内存映射真正拷贝是在缺页中断处理时进行，内存映射将文件直接映射到用户空间，中断处理函数根据这个映射关系直接将文件从硬盘拷贝到用户空间，只进行一次数据拷贝，效率高于 read/write

  - 与共享内存区别：

    > 内存映射文件利用虚拟内存把文件映射到进程的地址空间中去，此后进程操作文件就像操作进程空间地址。共享内存是内存映射文件一种特殊情况，内存映射是一块内存，而非磁盘上的文件。共享内存的主语是进程，操作系统默认会给每个进程分配一个内存空间，每个进程只允许访问操作系统分配的内存，不能访问其他进程的。操作系统给出创建访问共享内存的 API，需共享内存的进程可通过 API 访问多进程之间共有内存，各个进程访问这一段内存就像访问一个硬盘上的文件一样

  - 与虚拟内存区别：

    > 联系：两者都将一部分内容加载到内存，另一部分放在磁盘上。对用户透明
    >
    > 区别：虚拟内存是硬盘的一部分，是内存和硬盘的数据交换区。内存映射是一个文件到一块内存的映射，程序通过内存指针就可访问文件。虚拟内存的硬件基础是分页机制和局部性原理，将程序一部分装入内存，其余部分留在外存，访问信息不存在再将数据调入内存。而内存映射文件不是局部性，而是使虚拟地址空间某个区域映射磁盘的全部或部分内容，通过该区域对被映射磁盘文件进行访问，不必 I/O 和缓冲

- 套接字：明确地区分客户端与服务器，可实现多个客户端连到同一服务器