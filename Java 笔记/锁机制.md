### 锁机制

#### 1、公平锁与非公平锁

- 公平锁与非公平锁效率差异：公平锁要维护一个队列，后来的线程要加锁，即使锁空闲也要先检查有无其他线程 wait，有的话自己挂起，加到队列后面，唤醒队首线程，比非公平锁多一次挂起和唤醒，线程切换的开销是非公平锁效率高于公平锁的原因，非公平锁减少线程挂起几率，后来的线程有一定几率逃离被挂起的开销