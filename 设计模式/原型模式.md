### 原型设计模式

> 用于创建重复的对象，实现对象的拷贝。类似于创建型模式
>
> 应用场景：能够复制当前对象，实现对象数据的克隆。如：一个对象的数据需要经过较高代价的数据库操作，采用原型模式能够较好的缓存当前对象，减少数据库的访问量

- 优点
  - 快速创建复杂对象实例
  - 逃避构造函数约束
- 缺点
  - 引用含有循环引用如何处理
  - 必须实现Cloneable接口

![image-20210702154216456](C:\Users\13085\AppData\Roaming\Typora\typora-user-images\image-20210702154216456.png)

- 例：实现不同型号的手机由相同工厂生产的问题，快速创建这样一个对象

  - 手机由名称、价格、生产工厂组成
  - 生产工厂由工程师、名称组成
  - 工程师由姓名基本属性

  ```java
  //手机类
  public class Phone {
      public String name; //手机名称
      public float price; //价钱
      public Factory factory; //工厂
  
      public Phone Clone(){
          Phone phone = null;
          try{
              phone = new Phone();
              if(this.name != null){
                  phone.name = this.name;
              }
              if(this.price != 0){
                  phone.price = this.price;
              }
              if(this.factory != null){
                  phone.factory = this.factory.Clone();
              }
          }catch (Exception e){
              new  RuntimeException(e);
          }
          return phone;
      }
  }
  
  //工厂类
  public class Factory implements Cloneable{
      public String name;  //工厂名称
      public Person Manager; //负责人
  
      public Factory Clone(){
          Factory factory = null;
          try{
              factory = new Factory();
              if(this.name != null){
                  factory.name = this.name;
              }
              if(this.Manager != null){
                  factory.Manager = this.Manager.Clone();
              }
          }catch (Exception e){
              new RuntimeException(e);
          }
          return factory;
      }
  }
  
  //工程师类
  public class Person implements Cloneable{
      public String name; //名称
  
      public Person Clone(){
          Person person = null;
          try{
              person = new Person();
              person.name = this.name;
          }catch (Exception e){
              new RuntimeException(e);
          }
          return person;
      }
  }
  
  //生产一部荣耀一部分华为
  public class Main {
      public static void main(String[] args) {
          Phone phone = new Phone();
          phone.name = "Honor";
          phone.price = new Float(1.5);
          phone.factory = new Factory();
          phone.factory.name = "三星工厂";
          Person person = new Person();
          person.name = "郭";
          phone.factory.Manager = person;
          Phone phone1 = phone.Clone();
          phone1.name = "华为";
      }
  }
  ```

  